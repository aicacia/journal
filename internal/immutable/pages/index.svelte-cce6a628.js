import{S as z,i as J,N as K,l as M,r as Y,a as B,m as v,n as E,u as N,c as O,h as k,p as $,_ as F,b as I,M as S,v as q,R as we,am as ke,E as C,U as W,q as ee,V as ye,f as b,g as V,d as U,t as w,ai as Q,w as P,x as j,y as A,B as L,W as Se,O as De,P as $e,Q as Me,o as ve,s as Ee,e as te}from"../chunks/index-8e1ea7fc.js";import{i as Fe,j as ne,k as Ie,a as le,m as re,n as oe,L as Be}from"../chunks/Layout-6f72e75c.js";import{j as Oe,l as Pe,U as je,c as Ae,s as Le,C as be,r as Ye}from"../chunks/remoteStorageState-59ce5716.js";import"../chunks/preload-helper-b6d3926a.js";var T;(function(l){l[l.Forward=0]="Forward",l[l.Backward=1]="Backward"})(T||(T={}));class R{constructor(e,n,t=1){this.start=e!==e?0:e,this.end=n!==n?this.start-1:n,this.step=t!==t?1:Math.abs(t),this.direction=e>n?T.Backward:T.Forward}static from(e,n,t=1){return new R(e,n,t)}getStart(){return this.start}getEnd(){return this.end}getStep(){return this.step}getDirection(){return this.direction}contains(e){return this.start<=e&&e<=this.end}isEmpty(){return this.direction===T.Forward?this.start>this.end:this.start<this.end}iter(){return new Fe(this)}[Symbol.iterator](){return this}next(){if(this.isEmpty())return{done:!0,value:void 0};{const e=this.start;return this.direction===T.Forward?this.start+=this.step:this.start-=this.step,{done:!1,value:e}}}}const G=R.from;function ae(l,e,n){const t=l.slice();return t[9]=e[n],t}function se(l){let e,n=le(l[5],l[0])+"",t;return{c(){e=Y(", "),t=Y(n)},l(o){e=N(o,", "),t=N(o,n)},m(o,f){I(o,e,f),I(o,t,f)},p(o,f){f&33&&n!==(n=le(o[5],o[0])+"")&&q(t,n)},d(o){o&&k(e),o&&k(t)}}}function ie(l){let e,n=l[9].location+"",t;return{c(){e=M("span"),t=Y(n),this.h()},l(o){e=v(o,"SPAN",{class:!0});var f=E(e);t=N(f,n),f.forEach(k),this.h()},h(){$(e,"class","flex-1 truncate")},m(o,f){I(o,e,f),S(e,t)},p(o,f){f&8&&n!==(n=o[9].location+"")&&q(t,n)},d(o){o&&k(e)}}}function fe(l,e){let n,t,o=e[9].createdAt.toLocaleTimeString()+"",f,u,h,g,p,i=e[9].location&&ie(e);function _(){return e[8](e[9])}return{key:l,first:null,c(){n=M("li"),t=M("span"),f=Y(o),u=B(),i&&i.c(),h=B(),this.h()},l(s){n=v(s,"LI",{class:!0,style:!0});var m=E(n);t=v(m,"SPAN",{class:!0});var y=E(t);f=N(y,o),y.forEach(k),u=O(m),i&&i.l(m),h=O(m),m.forEach(k),this.h()},h(){$(t,"class","flex-1"),$(n,"class","p-2 text-xs text-white flex justify-between cursor-pointer hover:opacity-80"),ee(n,"background",re(e[9])),this.first=n},m(s,m){I(s,n,m),S(n,t),S(t,f),S(n,u),i&&i.m(n,null),S(n,h),g||(p=ye(n,"click",_),g=!0)},p(s,m){e=s,m&8&&o!==(o=e[9].createdAt.toLocaleTimeString()+"")&&q(f,o),e[9].location?i?i.p(e,m):(i=ie(e),i.c(),i.m(n,h)):i&&(i.d(1),i=null),m&8&&ee(n,"background",re(e[9]))},d(s){s&&k(n),i&&i.d(),g=!1,p()}}}function Ne(l){let e,n,t=ne(l[5],l[0])+"",o,f,u,h=l[0].getDate()+"",g,p=l[0].getDate()===1,i,_,s=[],m=new Map,y=p&&se(l),a=l[3];const c=r=>r[9].id;for(let r=0;r<a.length;r+=1){let d=ae(l,a,r),D=c(d);m.set(D,s[r]=fe(D,d))}return{c(){e=M("div"),n=M("p"),o=Y(t),f=B(),u=M("span"),g=Y(h),y&&y.c(),i=B(),_=M("ul");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=v(r,"DIV",{id:!0,class:!0});var d=E(e);n=v(d,"P",{class:!0});var D=E(n);o=N(D,t),f=O(D),u=v(D,"SPAN",{class:!0});var Z=E(u);g=N(Z,h),Z.forEach(k),y&&y.l(D),D.forEach(k),i=O(d),_=v(d,"UL",{});var x=E(_);for(let H=0;H<s.length;H+=1)s[H].l(x);x.forEach(k),d.forEach(k),this.h()},h(){$(u,"class","rounded-full inline-block"),F(u,"bg-black",l[4]),F(u,"text-white",l[4]),F(u,"py-1",l[4]),F(u,"w-6",l[4]),F(u,"h-6",l[4]),$(n,"class","text-xs text-center"),$(e,"id",l[2]),$(e,"class","p-2 border-t border-l border-gray-300")},m(r,d){I(r,e,d),S(e,n),S(n,o),S(n,f),S(n,u),S(u,g),y&&y.m(n,null),S(e,i),S(e,_);for(let D=0;D<s.length;D+=1)s[D].m(_,null)},p(r,[d]){d&33&&t!==(t=ne(r[5],r[0])+"")&&q(o,t),d&1&&h!==(h=r[0].getDate()+"")&&q(g,h),d&16&&F(u,"bg-black",r[4]),d&16&&F(u,"text-white",r[4]),d&16&&F(u,"py-1",r[4]),d&16&&F(u,"w-6",r[4]),d&16&&F(u,"h-6",r[4]),d&1&&(p=r[0].getDate()===1),p?y?y.p(r,d):(y=se(r),y.c(),y.m(n,null)):y&&(y.d(1),y=null),d&10&&(a=r[3],s=we(s,d,c,1,r,a,m,_,ke,fe,null,ae)),d&4&&$(e,"id",r[2])},i:C,o:C,d(r){r&&k(e),y&&y.d();for(let d=0;d<s.length;d+=1)s[d].d()}}}function Te(l,e,n){let t,o,f,u,h;W(l,Oe,s=>n(7,u=s)),W(l,Pe,s=>n(5,h=s));let{date:g}=e,{today:p=new Date}=e,{onSelect:i=()=>{}}=e;const _=s=>i(s);return l.$$set=s=>{"date"in s&&n(0,g=s.date),"today"in s&&n(6,p=s.today),"onSelect"in s&&n(1,i=s.onSelect)},l.$$.update=()=>{l.$$.dirty&65&&n(4,t=Ie(g,p)),l.$$.dirty&129&&n(3,o=(u[g.toISOString().substring(0,7)]||{})[g.getDate()]||[]),l.$$.dirty&1&&n(2,f=g.toISOString().substring(0,10))},[g,i,f,o,t,h,p,u,_]}class X extends z{constructor(e){super(),J(this,e,Te,Ne,K,{date:0,today:6,onSelect:1})}}function ue(l,e,n){const t=l.slice();return t[12]=e[n],t}function ce(l,e,n){const t=l.slice();return t[12]=e[n],t}function he(l,e,n){const t=l.slice();return t[12]=e[n],t}function de(l){let e,n;return e=new X({props:{date:new Date(l[0].getFullYear(),l[0].getMonth()-1,l[12]),today:l[1],onSelect:l[2]}}),{c(){P(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,o){A(e,t,o),n=!0},p(t,o){const f={};o&9&&(f.date=new Date(t[0].getFullYear(),t[0].getMonth()-1,t[12])),o&2&&(f.today=t[1]),o&4&&(f.onSelect=t[2]),e.$set(f)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function _e(l){let e,n;return e=new X({props:{date:new Date(l[0].getFullYear(),l[0].getMonth(),l[12]),today:l[1],onSelect:l[2]}}),{c(){P(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,o){A(e,t,o),n=!0},p(t,o){const f={};o&17&&(f.date=new Date(t[0].getFullYear(),t[0].getMonth(),t[12])),o&2&&(f.today=t[1]),o&4&&(f.onSelect=t[2]),e.$set(f)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function ge(l){let e,n;return e=new X({props:{date:new Date(l[0].getFullYear(),l[0].getMonth()+1,l[12]),today:l[1],onSelect:l[2]}}),{c(){P(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,o){A(e,t,o),n=!0},p(t,o){const f={};o&33&&(f.date=new Date(t[0].getFullYear(),t[0].getMonth()+1,t[12])),o&2&&(f.today=t[1]),o&4&&(f.onSelect=t[2]),e.$set(f)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Ve(l){let e,n,t,o,f,u=l[3],h=[];for(let a=0;a<u.length;a+=1)h[a]=de(he(l,u,a));const g=a=>w(h[a],1,1,()=>{h[a]=null});let p=l[4],i=[];for(let a=0;a<p.length;a+=1)i[a]=_e(ce(l,p,a));const _=a=>w(i[a],1,1,()=>{i[a]=null});let s=l[5],m=[];for(let a=0;a<s.length;a+=1)m[a]=ge(ue(l,s,a));const y=a=>w(m[a],1,1,()=>{m[a]=null});return{c(){e=M("div"),n=M("div");for(let a=0;a<h.length;a+=1)h[a].c();t=B();for(let a=0;a<i.length;a+=1)i[a].c();o=B();for(let a=0;a<m.length;a+=1)m[a].c();this.h()},l(a){e=v(a,"DIV",{class:!0});var c=E(e);n=v(c,"DIV",{class:!0});var r=E(n);for(let d=0;d<h.length;d+=1)h[d].l(r);t=O(r);for(let d=0;d<i.length;d+=1)i[d].l(r);o=O(r);for(let d=0;d<m.length;d+=1)m[d].l(r);r.forEach(k),c.forEach(k),this.h()},h(){$(n,"class","w-full h-full grid grid-cols-1 md:grid-cols-7 border-b border-r border-gray-300"),$(e,"class","w-full h-full overflow-x-hidden overflow-y-auto")},m(a,c){I(a,e,c),S(e,n);for(let r=0;r<h.length;r+=1)h[r].m(n,null);S(n,t);for(let r=0;r<i.length;r+=1)i[r].m(n,null);S(n,o);for(let r=0;r<m.length;r+=1)m[r].m(n,null);f=!0},p(a,[c]){if(c&15){u=a[3];let r;for(r=0;r<u.length;r+=1){const d=he(a,u,r);h[r]?(h[r].p(d,c),b(h[r],1)):(h[r]=de(d),h[r].c(),b(h[r],1),h[r].m(n,t))}for(V(),r=u.length;r<h.length;r+=1)g(r);U()}if(c&23){p=a[4];let r;for(r=0;r<p.length;r+=1){const d=ce(a,p,r);i[r]?(i[r].p(d,c),b(i[r],1)):(i[r]=_e(d),i[r].c(),b(i[r],1),i[r].m(n,o))}for(V(),r=p.length;r<i.length;r+=1)_(r);U()}if(c&39){s=a[5];let r;for(r=0;r<s.length;r+=1){const d=ue(a,s,r);m[r]?(m[r].p(d,c),b(m[r],1)):(m[r]=ge(d),m[r].c(),b(m[r],1),m[r].m(n,null))}for(V(),r=s.length;r<m.length;r+=1)y(r);U()}},i(a){if(!f){for(let c=0;c<u.length;c+=1)b(h[c]);for(let c=0;c<p.length;c+=1)b(i[c]);for(let c=0;c<s.length;c+=1)b(m[c]);f=!0}},o(a){h=h.filter(Boolean);for(let c=0;c<h.length;c+=1)w(h[c]);i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)w(i[c]);m=m.filter(Boolean);for(let c=0;c<m.length;c+=1)w(m[c]);f=!1},d(a){a&&k(e),Q(h,a),Q(i,a),Q(m,a)}}}function Ue(l,e,n){let t,o,f,u,h,g,p,i,_,{date:s}=e,{today:m=new Date}=e,{onSelect:y=()=>{}}=e;return l.$$set=a=>{"date"in a&&n(0,s=a.date),"today"in a&&n(1,m=a.today),"onSelect"in a&&n(2,y=a.onSelect)},l.$$.update=()=>{l.$$.dirty&1&&n(11,t=oe(s)),l.$$.dirty&2048&&n(4,o=G(1,t).iter().toArray()),l.$$.dirty&17&&n(10,f=new Date(s.getFullYear(),s.getMonth(),o[0])),l.$$.dirty&1024&&n(9,u=f.getDay()-1),l.$$.dirty&1&&n(8,h=oe(new Date(s.getFullYear(),s.getMonth()-1))),l.$$.dirty&768&&n(3,g=G(h-u,h).iter().toArray()),l.$$.dirty&24&&n(7,p=o.length+g.length),l.$$.dirty&128&&n(6,i=p>35?42-p:35-p),l.$$.dirty&64&&n(5,_=i>0?G(1,i).iter().toArray():[])},[s,m,y,g,o,_,i,p,h,u,f,t]}class qe extends z{constructor(e){super(),J(this,e,Ue,Ve,K,{date:0,today:1,onSelect:2})}}function me(l){let e,n;return e=new be({}),{c(){P(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,o){A(e,t,o),n=!0},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function pe(l){let e,n;return e=new be({}),{c(){P(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,o){A(e,t,o),n=!0},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Ce(l){let e,n,t,o,f,u,h,g,p,i;Se(l[6]);let _=l[3]>=640&&me();t=new qe({props:{date:l[0],today:l[4],onSelect:l[5]}});let s=l[3]<640&&pe();function m(a){l[7](a)}let y={journalEntry:l[1]};return l[2]!==void 0&&(y.open=l[2]),u=new je({props:y}),De.push(()=>$e(u,"open",m)),{c(){e=M("div"),_&&_.c(),n=B(),P(t.$$.fragment),o=B(),s&&s.c(),f=B(),P(u.$$.fragment),this.h()},l(a){e=v(a,"DIV",{class:!0});var c=E(e);_&&_.l(c),n=O(c),j(t.$$.fragment,c),o=O(c),s&&s.l(c),c.forEach(k),f=O(a),j(u.$$.fragment,a),this.h()},h(){$(e,"class","flex flex-col flex-grow pb-[80px]")},m(a,c){I(a,e,c),_&&_.m(e,null),S(e,n),A(t,e,null),S(e,o),s&&s.m(e,null),I(a,f,c),A(u,a,c),g=!0,p||(i=ye(window,"resize",l[6]),p=!0)},p(a,[c]){a[3]>=640?_?c&8&&b(_,1):(_=me(),_.c(),b(_,1),_.m(e,n)):_&&(V(),w(_,1,1,()=>{_=null}),U());const r={};c&1&&(r.date=a[0]),t.$set(r),a[3]<640?s?c&8&&b(s,1):(s=pe(),s.c(),b(s,1),s.m(e,null)):s&&(V(),w(s,1,1,()=>{s=null}),U());const d={};c&2&&(d.journalEntry=a[1]),!h&&c&4&&(h=!0,d.open=a[2],Me(()=>h=!1)),u.$set(d)},i(a){g||(b(_),b(t.$$.fragment,a),b(s),b(u.$$.fragment,a),g=!0)},o(a){w(_),w(t.$$.fragment,a),w(s),w(u.$$.fragment,a),g=!1},d(a){a&&k(e),_&&_.d(),L(t),s&&s.d(),a&&k(f),L(u,a),p=!1,i()}}}function We(l,e,n){let t;W(l,Ae,_=>n(0,t=_));let o=new Date,f,u=!1,h=1024;function g(_){n(1,f=_),n(2,u=!0)}ve(()=>{var _;(_=document.getElementById(o.toISOString().substring(0,10)))==null||_.scrollIntoView()});function p(){n(3,h=window.innerWidth)}function i(_){u=_,n(2,u)}return l.$$.update=()=>{l.$$.dirty&1&&Le(t)},[t,f,u,h,o,g,p,i]}class ze extends z{constructor(e){super(),J(this,e,We,Ce,K,{})}}function Je(l){let e,n;return{c(){e=M("h3"),n=Y("Please connect to a Storage Provider"),this.h()},l(t){e=v(t,"H3",{class:!0});var o=E(e);n=N(o,"Please connect to a Storage Provider"),o.forEach(k),this.h()},h(){$(e,"class","text-center py-8 text-lg")},m(t,o){I(t,e,o),S(e,n)},i:C,o:C,d(t){t&&k(e)}}}function He(l){let e,n;return e=new ze({}),{c(){P(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,o){A(e,t,o),n=!0},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Qe(l){let e,n,t,o;const f=[He,Je],u=[];function h(g,p){return g[0].storage==="connected"?0:1}return e=h(l),n=u[e]=f[e](l),{c(){n.c(),t=te()},l(g){n.l(g),t=te()},m(g,p){u[e].m(g,p),I(g,t,p),o=!0},p(g,p){let i=e;e=h(g),e!==i&&(V(),w(u[i],1,1,()=>{u[i]=null}),U(),n=u[e],n||(n=u[e]=f[e](g),n.c()),b(n,1),n.m(t.parentNode,t))},i(g){o||(b(n),o=!0)},o(g){w(n),o=!1},d(g){u[e].d(g),g&&k(t)}}}function Ge(l){let e,n;return e=new Be({props:{$$slots:{default:[Qe]},$$scope:{ctx:l}}}),{c(){P(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,o){A(e,t,o),n=!0},p(t,[o]){const f={};o&3&&(f.$$scope={dirty:o,ctx:t}),e.$set(f)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Ke(l,e,n){let t;return W(l,Ye,o=>n(0,t=o)),[t]}class et extends z{constructor(e){super(),J(this,e,Ke,Ge,Ee,{})}}export{et as default};
